from pyrogram.types import InputMediaPhoto, InputMediaAnimation, InputMediaDocument, InputMediaAudio, InputMediaVideo
from config import BANNED_USERS
from DnsXMusic import app
from pyrogram import filters
from TheApi import api

# Handler for image commands
@app.on_message(filters.command(["image", "img", "mg", "mage"], prefixes=["/", "!", "I", "i"]) & ~BANNED_USERS)
async def image_from_bing(_, message):
    if len(message.command) < 2 and not message.reply_to_message:
        return await message.reply_text("**É¢Éªá´ á´‡ Éªá´á´€É¢á´‡ É´á´€á´á´‡ Ò“á´Ê€ sá´‡á´€Ê€á´„Êœ ðŸ”**")

    query = message.reply_to_message.text if message.reply_to_message else " ".join(message.command[1:])
    messagesend = await message.reply_text("**ðŸ” sá´‡á´€Ê€á´„ÊœÉªÉ´É¢ Ò“á´Ê€ Éªá´á´€É¢á´‡s...**")

    media_group = [InputMediaPhoto(media=url) for url in api.bing_image(query, 5)]
    await messagesend.edit("**á´œá´˜ÊŸá´á´€á´…ÉªÉ´É¢...**")
    try:
        await app.send_media_group(message.chat.id, media_group)
        await messagesend.delete()
    except Exception as e:
        await messagesend.edit(str(e))

# Handler for animation commands
@app.on_message(filters.command(["animation", "ani", "ni"], prefixes=["/", "!", "A", "a"]) & ~BANNED_USERS)
async def animation_from_bing(_, message):
    if len(message.command) < 2 and not message.reply_to_message:
        return await message.reply_text("**É¢Éªá´ á´‡ á´€É´Éªá´á´€á´›Éªá´É´ É´á´€á´á´‡ Ò“á´Ê€ sá´‡á´€Ê€á´„Êœ ðŸ”**")

    query = message.reply_to_message.text if message.reply_to_message else " ".join(message.command[1:])
    messagesend = await message.reply_text("**ðŸ” sá´‡á´€Ê€á´„ÊœÉªÉ´É¢ Ò“á´Ê€ á´€É´Éªá´á´€á´›Éªá´É´s...**")

    media_group = [InputMediaAnimation(media=url) for url in api.bing_animation(query, 5)]
    await messagesend.edit("**á´œá´˜ÊŸá´á´€á´…ÉªÉ´É¢...**")
    try:
        await app.send_media_group(message.chat.id, media_group)
        await messagesend.delete()
    except Exception as e:
        await messagesend.edit(str(e))

# Handler for document commands
@app.on_message(filters.command(["document", "oc", "doc"], prefixes=["/", "!", "D", "d"]) & ~BANNED_USERS)
async def document_from_bing(_, message):
    if len(message.command) < 2 and not message.reply_to_message:
        return await message.reply_text("**É¢Éªá´ á´‡ á´…á´á´„á´œá´á´‡É´á´› É´á´€á´á´‡ Ò“á´Ê€ sá´‡á´€Ê€á´„Êœ ðŸ”**")

    query = message.reply_to_message.text if message.reply_to_message else " ".join(message.command[1:])
    messagesend = await message.reply_text("**ðŸ” sá´‡á´€Ê€á´„ÊœÉªÉ´É¢ Ò“á´Ê€ á´…á´á´„á´œá´á´‡É´á´›s...**")

    media_group = [InputMediaDocument(media=url) for url in api.bing_document(query, 5)]
    await messagesend.edit("**á´œá´˜ÊŸá´á´€á´…ÉªÉ´É¢...**")
    try:
        await app.send_media_group(message.chat.id, media_group)
        await messagesend.delete()
    except Exception as e:
        await messagesend.edit(str(e))

# Handler for audio commands
@app.on_message(filters.command(["audio", "sound", "ud", "udio"], prefixes=["/", "!", "a", "A"]) & ~BANNED_USERS)
async def audio_from_bing(_, message):
    if len(message.command) < 2 and not message.reply_to_message:
        return await message.reply_text("**É¢Éªá´ á´‡ á´€á´œá´…Éªá´ É´á´€á´á´‡ Ò“á´Ê€ sá´‡á´€Ê€á´„Êœ ðŸ”**")

    query = message.reply_to_message.text if message.reply_to_message else " ".join(message.command[1:])
    messagesend = await message.reply_text("**ðŸ” sá´‡á´€Ê€á´„ÊœÉªÉ´É¢ Ò“á´Ê€ á´€á´œá´…Éªá´s...**")

    media_group = [InputMediaAudio(media=url) for url in api.bing_audio(query, 5)]
    await messagesend.edit("**á´œá´˜ÊŸá´á´€á´…ÉªÉ´É¢...**")
    try:
        await app.send_media_group(message.chat.id, media_group)
        await messagesend.delete()
    except Exception as e:
        await messagesend.edit(str(e))

# Handler for video commands
@app.on_message(filters.command(["video", "id"], prefixes=["/", "!", "V", "v"]) & ~BANNED_USERS)
async def video_from_bing(_, message):
    if len(message.command) < 2 and not message.reply_to_message:
        return await message.reply_text("**É¢Éªá´ á´‡ á´ Éªá´…á´‡á´ É´á´€á´á´‡ Ò“á´Ê€ sá´‡á´€Ê€á´„Êœ ðŸ”**")

    query = message.reply_to_message.text if message.reply_to_message else " ".join(message.command[1:])
    messagesend = await message.reply_text("**ðŸ” sá´‡á´€Ê€á´„ÊœÉªÉ´É¢ Ò“á´Ê€ á´ Éªá´…á´‡á´s...**")

    media_group = [InputMediaVideo(media=url) for url in api.bing_video(query, 5)]
    await messagesend.edit("**á´œá´˜ÊŸá´á´€á´…ÉªÉ´É¢...**")
    try:
        await app.send_media_group(message.chat.id, media_group)
        await messagesend.delete()
    except Exception as e:
        await messagesend.edit(str(e))

__MODULE__ = "Má´‡á´…Éªá´€"
__HELP__ = """
**Media Commands**

* `/image` or `/img` or `/mg` or `/mage` : Search for images on Bing.
* `/animation` or `/ani` : Search for animations on Bing.
* `/document` or `/doc` : Search for documents on Bing.
* `/audio` or `/sound` : Search for audio files on Bing.
* `/video` or `vid` : Search for videos on Bing.

**Usage**

* Send a message with the command and the search query.
* Reply to a message with the command to search for the text in the replied message.
"""
